stages:
  - name: clean
    actions: []
  - name: dirtyAdd
    reset: true
    actions:
    - !writeFile
      sourceAssetIds:
        - file/dirtyAdd
      destinationPaths:
        - repo/folder/some_new
  - name: dirtyRemove
    reset: true
    actions:
    - !removeFile
      targetPaths:
        - repo/first_file
  - name: dirtyModify
    reset: true
    actions:
    - !writeFile
      sourceAssetIds:
        - file/dirtyModify
      destinationPaths:
        - repo/folder/forth
  - name: dirtyMixed
    reset: true
    replay:
    - dirtyAdd
    - dirtyRemove
    - dirtyModify
    actions: []
  - name: dirtyAddStage
    reset: true
    replay:
    - dirtyAdd    
    actions:
    - !stageAll
      repoSetupName: repo
  - name: dirtyRemoveStage
    reset: true
    replay:
    - dirtyRemove    
    actions:
    - !stageAll
      repoSetupName: repo      
  - name: dirtyModifyStage
    reset: true
    replay:
    - dirtyModify    
    actions:
    - !stageAll
      repoSetupName: repo
  - name: dirtyMixedStage
    reset: true
    replay:
    - dirtyAdd
    - dirtyRemove
    - dirtyModify    
    actions:
    - !stageAll
      repoSetupName: repo      
  - name: merge
    reset: true
    actions:
    - !merge
      repoSetupName: repo
      withBranch: "second-branch"
  - name: conflictAA
    reset: true
    actions:
    - !merge
      repoSetupName: repo
      withBranch: "conflict-AA"
  - name: conflictMM
    reset: true
    actions:
    - !merge
      repoSetupName: repo
      withBranch: "conflict-MM"
  - name: conflictMR
    reset: true
    actions:
    - !merge
      repoSetupName: repo
      withBranch: "conflict-MR"
  - name: conflictMixed
    reset: true  
    actions:
    - !merge
      repoSetupName: repo
      withBranch: "conflict-mixed"
  - name: conflictEdit
    reset: true
    replay:
    - conflictMixed    
    actions:
    - !writeFile
      sourceAssetIds:
        - file/resolveConflictAA
        - file/resolveConflictMM
        - file/resolveConflictMR
      destinationPaths:
        - repo/folder/fifth
        - repo/first_file
        - repo/second_file
  - name: conflictResolveStage
    reset: true
    replay:
    - conflictMixed
    - conflictEdit    
    actions:
    - !stageAll
      repoSetupName: repo
  - name: conflictResolve
    reset: true
    replay:
    - conflictMixed
    - conflictEdit
    - conflictResolveStage    
    actions:
    - !continueMerge
      repoSetupName: repo
  - name: detached
    reset: true
    actions:
    - !cleanCheckout
      repoSetupName: repo
      commitish: "end-of-base"
      

        


