!level
  repoVcsSetups:
    basic:
      workingPath: basic
      referenceStoreName: basic-operation
  steps:
  # build basic operation repo
    - !dev.devAction 
      actions:
      # init git
        - !dev.act.git
          repoSetupName: basic
          arguments:
            - init
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ config, "--local", user.name, someone]
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ config, "--local", user.email, someone@some.mail]
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ config, "--local", core.autocrlf, input]

      # initial commit
        - !act.writeFile 
          sourceAssetIds:
            - "$level-data/intro-open-repository/file-1:v1"
            - "$level-data/intro-open-repository/file-2:v1"
            - "$level-data/intro-open-repository/file-3:v1"
            - "level-data/intro-open-repository/sound-bird"
          destinationPaths:
            - "basic/1.txt"
            - "basic/2.txt"
            - "basic/3.txt"
            - "basic/sound.mp3"
        - !dev.act.git &stageAll
          repoSetupName: basic
          arguments: [ "add", "-A" ]
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 1 號提交" ]

      # second commit, for browsing
        - !act.writeFile 
          sourceAssetIds:
            - "$level-data/intro-open-repository/file-read-me:v1"
          destinationPaths:
            - "basic/===read me===.txt"
        - *stageAll
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 2 號提交" ]
      
      # third commit, garbage
        - !act.writeFile 
          sourceAssetIds:
            - "$level-data/intro-open-repository/file-1:v2"
            - "level-data/intro-open-repository/sound-cicada"
          destinationPaths:
            - "basic/1.txt"
            - "basic/sound.mp3"
        - *stageAll
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 3 號提交" ]

      # fourth commit, for browsing second time
        - !act.writeFile 
          sourceAssetIds:
            - "$level-data/intro-open-repository/file-read-me:v2"
          destinationPaths:
            - "basic/===read me===.txt"
        - *stageAll
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 4 號提交" ]
        
      # fifth commit, for browsing third time
        - !act.writeFile 
          sourceAssetIds:
            - "$level-data/intro-open-repository/file-read-me:v3"
          destinationPaths:
            - "basic/===read me===.txt"
        - *stageAll
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 5 號提交" ]

      # sixth comit, garbage
        - !act.removeFile 
          targetPaths:
            - "basic/2.txt"
            - "basic/sound.mp3"
        - *stageAll 
        - !dev.act.git 
          repoSetupName: basic
          arguments: [ "commit", "-m", "第 6 號提交" ]

      # save reference
        - !dev.act.saveReference 
          repoSetupName: basic
          referenceName: init

    - !loadOneReference
      repoSetupName: basic
      referenceName: init


    - !elaborate
      descriptionId: "level-data/intro-open-repository/introduce-goal"
      needConfirm: true
    - !instruct 
      descriptionId: "level-data/intro-open-repository/open"
      needConfirm: true
    - !elaborate 
      descriptionId: "level-data/intro-open-repository/folded"
      needConfirm: true
    - !instruct 
      descriptionId: "level-data/intro-open-repository/open-directory-in-fork"
      needConfirm: true
    - !instruct 
      descriptionId: "level-data/intro-open-repository/instruct-verify-open"
    - !verifyInput 
      answer: "6"

    - !elaborate
      descriptionId: "level-data/intro-open-repository/summary"
    